<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>IT Accomplishment Report</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css">
  
</head>
<body class="bg-gray-100 min-h-screen p-6">
  <h1 class="text-2xl font-bold text-center text-gray-800 mb-6">IT Accomplishment Reports</h1>
  
  <!-- Add Button -->
  <div class="flex justify-center mb-6">
    <button id="openModalBtn" class="px-4 py-2 bg-blue-600 text-white rounded-lg shadow hover:bg-blue-700 transition">
      âž• Add New Report
    </button>
  </div>

  <!-- Reports Grid -->
  <div id="reportsGrid" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6 mb-8"></div>

  <!-- Modal -->
  <div id="reportModal" class="fixed inset-0 bg-black bg-opacity-50 hidden items-center justify-center z-50">
    <div class="bg-white rounded-lg shadow-lg w-full max-w-lg p-6">
      <div class="flex justify-between items-center mb-4">
        <h2 class="text-lg font-semibold text-gray-800">New Report</h2>
        <button id="closeModal" class="text-gray-600 hover:text-gray-800">&times;</button>
      </div>
      <form id="reportForm" class="space-y-4">
        <div>
          <label class="block text-sm font-medium text-gray-700">Date of Service</label>
          <input type="date" id="date" required class="mt-1 w-full rounded-md border-gray-300 shadow-sm focus:ring-blue-500 focus:border-blue-500">
        </div>
        <div>
          <label class="block text-sm font-medium text-gray-700">Time of Service</label>
          <input type="time" id="time" required class="mt-1 w-full rounded-md border-gray-300 shadow-sm focus:ring-blue-500 focus:border-blue-500">
        </div>
        <div>
          <label class="block text-sm font-medium text-gray-700">Service Type</label>
          <select id="serviceType" required class="mt-1 w-full rounded-md border-gray-300 shadow-sm focus:ring-blue-500 focus:border-blue-500">
            <option value="">-- Select Service --</option>
            <option value="Cleaning Units">Cleaning Units</option>
            <option value="Repair & Maintenance">Repair & Maintenance</option>
            <option value="Software Installation">Software Installation</option>
            <option value="Network Support">Network Support</option>
            <option value="Other">Other</option>
          </select>
        </div>
        <div>
          <label class="block text-sm font-medium text-gray-700">Location</label>
          <input type="text" id="location" placeholder="Ex: Data Center - Building A" class="mt-1 w-full rounded-md border-gray-300 shadow-sm focus:ring-blue-500 focus:border-blue-500">
        </div>
        <div>
          <label class="block text-sm font-medium text-gray-700">Description of Work</label>
          <textarea id="description" rows="3" required class="mt-1 w-full rounded-md border-gray-300 shadow-sm focus:ring-blue-500 focus:border-blue-500"></textarea>
        </div>
        <div>
          <label class="block text-sm font-medium text-gray-700">Upload Proof (multiple images allowed)</label>
          <input type="file" id="images" multiple accept="image/*" class="mt-1 w-full">
          <div id="preview" class="flex gap-2 mt-2 flex-wrap"></div>
        </div>
        <button type="submit" class="w-full bg-blue-600 text-white py-2 rounded-lg hover:bg-blue-700">Submit Report</button>
      </form>
    </div>
  </div>

  <script>
    const modal = document.getElementById("reportModal");
    const openModalBtn = document.getElementById("openModalBtn");
    const closeModal = document.getElementById("closeModal");
    const form = document.getElementById("reportForm");
    const preview = document.getElementById("preview");
    const reportsGrid = document.getElementById("reportsGrid");

    let uploadedImages = [];

    // Modal Controls
    openModalBtn.onclick = () => modal.classList.remove("hidden");
    closeModal.onclick = () => { modal.classList.add("hidden"); resetForm(); };
    window.onclick = (e) => { if (e.target === modal) { modal.classList.add("hidden"); resetForm(); } };

    // Preview uploaded images
    document.getElementById("images").addEventListener("change", (e) => {
      preview.innerHTML = "";
      uploadedImages = [];
      Array.from(e.target.files).forEach(file => {
        const reader = new FileReader();
        reader.onload = (event) => {
          const img = document.createElement("img");
          img.src = event.target.result;
          img.className = "w-12 h-12 rounded object-cover border";
          preview.appendChild(img);
          uploadedImages.push(event.target.result);
        };
        reader.readAsDataURL(file);
      });
    });

    // Submit Form
    form.addEventListener("submit", (e) => {
      e.preventDefault();

      const date = document.getElementById("date").value;
      const time = document.getElementById("time").value;
      const serviceType = document.getElementById("serviceType").value;
      const location = document.getElementById("location").value;
      const description = document.getElementById("description").value;

      // Card template
      const card = document.createElement("div");
      card.className = "bg-white rounded-lg shadow hover:shadow-lg transition overflow-hidden group";

      card.innerHTML = `
        <div class="relative">
          <img src="${uploadedImages[0] || 'https://via.placeholder.com/400x200?text=No+Image'}" 
               alt="Proof Image" class="w-full h-48 object-cover" />
          <div class="absolute top-3 right-3 opacity-0 group-hover:opacity-100 transition">
            <div class="flex space-x-2">
              <button class="w-8 h-8 bg-white rounded-full shadow flex items-center justify-center hover:bg-blue-600 hover:text-white">
                <i class="fas fa-edit text-xs"></i>
              </button>
              <button class="w-8 h-8 bg-white rounded-full shadow flex items-center justify-center hover:bg-red-600 hover:text-white">
                <i class="fas fa-trash text-xs"></i>
              </button>
            </div>
          </div>
        </div>
        <div class="p-6">
          <div class="flex items-center justify-between mb-3">
            <span class="text-sm font-medium text-blue-600 bg-blue-50 px-2 py-1 rounded">
              <i class="fas fa-calendar mr-1"></i>${date}
            </span>
            <span class="text-xs text-gray-500">${time}</span>
          </div>
          <p class="text-sm text-gray-500 mb-2"><i class="fas fa-map-marker-alt mr-1"></i>${location || 'N/A'}</p>
          <h3 class="font-semibold text-gray-800 mb-2">${serviceType}</h3>
          <p class="text-sm text-gray-600 mb-4">${description}</p>
          <div class="flex items-center justify-between">
            <div class="flex -space-x-2">
              ${uploadedImages.slice(0,3).map(src => `
                <img src="${src}" class="w-8 h-8 rounded-full border-2 border-white object-cover" />
              `).join('')}
              ${uploadedImages.length > 3 ? `
                <div class="w-8 h-8 bg-gray-200 rounded-full border-2 border-white flex items-center justify-center">
                  <span class="text-xs text-gray-600">+${uploadedImages.length - 3}</span>
                </div>
              ` : ""}
            </div>
            <a href="#" class="view-details-btn text-blue-600 hover:text-blue-800 text-sm font-medium">
                View Details <i class="fas fa-arrow-right ml-1"></i>
              </a>

          </div>
        </div>
      `;

      reportsGrid.prepend(card);
      modal.classList.add("hidden");
      resetForm();
    });

    function resetForm() {
      form.reset();
      preview.innerHTML = "";
      uploadedImages = [];
    }

    function showCardDetails(cardElement) {
  // Extract details from the card
  const title = cardElement.querySelector("h3")?.innerText || "No Title";
  const description = cardElement.querySelector("p")?.innerText || "No Description";
  const date = cardElement.querySelector(".text-primary")?.innerText || "No Date";
  const time = cardElement.querySelector(".text-xs")?.innerText || "";
  const location = cardElement.querySelector(".fa-map-marker-alt")?.parentElement.innerText || "No Location";

  // Get all images inside the card
  const images = Array.from(cardElement.querySelectorAll("img"))
    .map(img => img.src);

  // Create modal
  const modal = document.createElement("div");
  modal.className = "fixed inset-0 flex items-center justify-center bg-black bg-opacity-50 z-50";
  modal.innerHTML = `
    <div class="bg-white rounded-lg shadow-lg w-full max-w-2xl p-6 relative">
      <button onclick="this.parentElement.parentElement.remove()" 
        class="absolute top-3 right-3 text-gray-500 hover:text-red-600">
        <i class="fas fa-times text-lg"></i>
      </button>
      
      <h2 class="text-xl font-bold text-gray-800 mb-4">${title}</h2>
      <p class="text-sm text-gray-600 mb-2"><i class="fas fa-calendar mr-2"></i>${date} ${time}</p>
      <p class="text-sm text-gray-600 mb-4"><i class="fas fa-map-marker-alt mr-2"></i>${location}</p>
      
      <p class="text-gray-700 mb-4">${description}</p>
      
      <div class="grid grid-cols-2 gap-4">
        ${images.map(img => `<img src="${img}" class="w-full h-40 object-cover rounded shadow">`).join("")}
      </div>
    </div>
  `;

  document.body.appendChild(modal);
  return modal;
}

document.querySelectorAll(".view-details-btn").forEach(btn => {
  btn.addEventListener("click", (e) => {
    e.preventDefault(); // prevent jumping to top
    const card = e.target.closest(".group"); // card container
    showCardDetails(card); // call the function I wrote earlier
  });
});

  </script>
</body>
</html>
